<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Skydash Admin</title>
    <!-- plugins:css -->
    <link rel="stylesheet" href="~/skydash/vendors/feather/feather.css">
    <link rel="stylesheet" href="~/skydash/vendors/ti-icons/css/themify-icons.css">
    <link rel="stylesheet" href="~/skydash/vendors/css/vendor.bundle.base.css">
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" href="~/skydash/css/vertical-layout-light/style.css">
    <!-- endinject -->
    <link rel="shortcut icon" href="~/skydash/images/favicon.png"/>
    <link rel="stylesheet" href="~/lib/toastr/toastr.min.css">
</head>

<body>
<div class="container-scroller">
    <div class="container-fluid page-body-wrapper full-page-wrapper">
        <div class="content-wrapper d-flex align-items-center auth px-0">
            <div class="row w-100 mx-0">
                <div class="col-lg-4 mx-auto">
                    <div class="auth-form-light text-left py-5 px-4 px-sm-5">
                        <div class="brand-logo">
                            <img src="~/skydash/images/logo.svg" alt="logo">
                        </div>
                        <h4>Bir hesaınız yok mu?</h4>
                        <h6 class="font-weight-light">Sen de hemen kayıt olabilirsin.</h6>
                        <form class="pt-3" id="registerForm" method="post">
                            @Html.AntiForgeryToken()
                            <div class="form-group">
                                <label for="Name">Adınız</label>
                                <input type="text" id="formName" name="Name" class="form-control"/>
                            </div>
                            <div class="form-group">
                                <label for="Surname">Soyadınız</label>
                                <input type="text" id="formSurname" name="Surname" class="form-control"/>
                            </div>
                            <div class="form-group">
                                <label for="ImageUrl">Görsel URL</label>
                                <input type="text" id="formImageUrl" name="ImageUrl" class="form-control"/>
                            </div>
                            <div class="form-group">
                                <label for="UserName">Kullanıcı Adı</label>
                                <input type="text" id="formUserName" name="UserName" class="form-control"/>
                            </div>
                            <div class="form-group">
                                <label for="Password">Şifre</label>
                                <input type="text" id="formPassword" name="Password" class="form-control"/>
                            </div>
                            <div class="form-group">
                                <label for="ConfirmPassword">Şifre Tekrar</label>
                                <input type="text" id="formConfirmPassword" name="ConfirmPassword" class="form-control"/>
                            </div>
                            <div class="form-group">
                                <label for="Mail">Mail</label>
                                <input type="text" id="formMail" name="Mail" class="form-control"/>
                            </div>
                            @*<div class="mb-4">
                                <div class="form-check">
                                    <label class="form-check-label text-muted">
                                        <input type="checkbox" class="form-check-input">
                                        I agree to all Terms & Conditions
                                    </label>
                                </div>
                            </div>*@
                            <div class="text-danger" asp-validation-summary="ModelOnly">

                            </div>
                            <div class="mt-3">
                                <button type="submit" class="btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn">Kayıt Ol</button>
                            </div>
                            @*<div class="text-center mt-4 font-weight-light">
                                Already have an account? <a href="login.html" class="text-primary">Login</a>
                            </div>*@
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- content-wrapper ends -->
    </div>
    <!-- page-body-wrapper ends -->
</div>

</body>

@* jquery lib ekle *@
<script src="~/lib/jquery/jquery-3.7.1.min.js"></script>
<script src="~/lib/toastr/toastr.min.js"></script>

@* submit olduğunda ajax ile controllera veri gönder *@
<script>
    
    $("#registerForm").submit(function (event){
        event.preventDefault();
        var form = $(this);
        // validation yapmak istersen
        
        $.ajax({
            url: "/Writer/Register/Index/",
            type: "POST",
            data: form.serialize(),
            headers: {
                'RequestVerificationToken': $('input[name="__RequestVerificationToken"]').val()
            },
            success: function (response) {
                // mesaj kayoıt başarılı veya hata
                if (response.success){
                    toastr.success(response.message)
                    clearForm();
                }
                else{
                    response.errors.forEach( function (error){
                        toastr.error("Kayıt başarısız :"+error)
                    })
                }
            },
        })
        
    }) 
    
    function clearForm() {
        $("#formName").val("")
        $("#formSurname").val("")
        $("#formImageUrl").val("")
        $("#formUserName").val("")
        $("#formPassword").val("")
        $("#formConfirmPassword").val("")
        $("#formMail").val("")
    } 
    
</script>